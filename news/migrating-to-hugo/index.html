<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PSICE &middot; Migrating To Hugo (Part 1)</title>
    <meta name="description" content="Migrating the PSICE website from Weebly to Hugo">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="generator" content="Hugo 0.25.1" />
    <meta name="robots" content="index,follow">
    <!--Favicon-->
    <link rel="shortcut icon" href="http://www.psice.psu.edufavicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="http://www.psice.psu.edudist/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway|Open+Sans">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" />
    
  </head>
  <body>
    

    <div>
      <a href="http://www.psu.edu" class="svg">
	<object type="image/svg+xml" style="float:left; margin-top:10px; margin-left:10px; display:block;" data="http://www.psice.psu.eduimg/logo.svg" width="200px">
	</object>
      </a>
      <h1 class="page-title" itemprop="name" style="z-index: -1; pointer-events: none; position:relative;text-align:center;margin-top:10px;">Ice and Climate (PSICE)</h1>
    </div>
    
    <div id="wrapper">
      <header class="site-header" style="padding-top:0px;">
        <div class="container">
          <div class="site-title-wrapper">
            
            <a class="button-square button-social hint--top" data-hint="Twitter" title="Twitter" href="//twitter.com/psice280">
              <i class="fa fa-twitter"></i>
            </a>
            
            
            <a class="button-square button-social hint--top" data-hint="Gitlab" title="Gitlab" href="http://git.psu.edu/psice">
              <i class="fa fa-gitlab"></i>
            </a>
            
            
            <a class="button-square button-social hint--top" data-hint="Github" title="Github" href="http://github.com/sanandak">
              <i class="fa fa-github-alt"></i>
            </a>
            
            
            
            
            
            <a class="button-square button-social hint--top" data-hint="Email" title="Email" href="mailto:psice@psu.edu">
              <i class="fa fa-envelope"></i>
            </a>
            
          </div>

        </div>
      </header>

      <div id="container">
        <div id="post-index" class="container" itemscope="" itemtype="https://schema.org/Blog">
          <header class="page-header">

            <p></p>
            <ul class="site-nav">
              
    <li class="site-nav-item">
        <a title="Home" href="/">Home</a>
    </li>

    <li class="site-nav-item">
        <a title="News" href="/news/">News</a>
    </li>

    <li class="site-nav-item">
        <a title="Projects" href="/projects/">Projects</a>
    </li>

    <li class="site-nav-item">
        <a title="Publications" href="/pubs/">Publications</a>
    </li>

    <li class="site-nav-item">
        <a title="People" href="/people/">People</a>
    </li>

    <li class="site-nav-item">
        <a title="Contact" href="/contact/">Contact</a>
    </li>

    <li class="site-nav-item">
        <a title="Data" href="/data/">Data</a>
    </li>

            </ul>
          </header>


<div class="container">
    <article class="post-container">
        <header class="post-header">
    <h1 class="post-title">Migrating To Hugo (Part 1)</h1>
    
        <p class="post-description">Migrating the PSICE website from Weebly to Hugo</p>
    
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <p>I am moving the PSICE site to a <a href="http://gohugo.io" title="Hugo">Hugo</a>-based system.  Hugo is a
so-called "Static Site Generator" in which one writes the content as a
text file and Hugo generates the HTML code to put on the server.</p>

<h1 id="overview-of-the-pages-generated-by-hugo">Overview of the pages generated by Hugo</h1>

<p>The theme is 
stolen from <a href="http://rpal.cs.cornell.edu" title="RPAL at Cornell">RPAL at Cornell</a>, who have kindly shared their setup.  The 
look is driven by <code>config.toml</code>.</p>

<pre><code class="language-toml">
## config.toml 

title = &quot;PSICE&quot;
baseurl = &quot;https://sanandak.github.io/lab-site/&quot;
languageCode = &quot;en-us&quot;
theme = &quot;ghostwriter&quot;
# ...removed some lines

[Params]
    intro = true
    headline = &quot;Ice and Climate (PSICE)&quot;
    # ...removed some lines

[[menu.main]]
    name = &quot;Home&quot;
    url = &quot;/&quot;
    weight = 1

[[menu.main]]
    name = &quot;News&quot;
    url = &quot;/news/&quot;
    weight = 2

# ...removed some lines...

[[menu.main]]
    name = &quot;Contact&quot;
    url = &quot;/contact/&quot;
    weight = 6
</code></pre>

<p>Each <code>[[menu.main]]</code> entry will generate a new page and a new menu item in
the navigation bar (the ordering of the nav items is based on the <code>weight</code>).  The content for that page is in the <code>url</code> entry.  Hugo will
look for either a file with that base name or a directory with that name.</p>

<p>If there is a file (with an extension of either <code>md</code>, for markdown
text or <code>org</code> for Org-mode text), then that file will be parsed for any markup
instructions and rendered nicely on the page. (Markdown and Org-mode 
are ways to shortcut and simplify formatting of text.  Google is your
friend...).</p>

<p>If there is a directory with the <code>url</code> name in the <code>content</code> directory, then
Hugo will process <em>each file</em> in that directory and display them.  Here is
where it <em>could</em> get hairy because Hugo can render those pages in many 
different ways that you can customize.</p>

<pre><code>
├── config.toml
├── content
│   ├── about.org
│   ├── contact.org
│   ├── news
│   │   ├── GMT.org
│   │   └── migrating-to-hugo.org
│   ├── people
│   │   ├── brad.md
│   │   ├── byron-parizek.md
    ...
</code></pre>

<h2 id="layouts">Layouts</h2>

<p>The <em>theme</em> layout can be overridden by files in the directory <code>/layouts</code>.</p>

<pre><code>
layouts/
├── 404.html
├── index.html
├── partials
    # ... more on this directory later
├── section
│   ├── data.html
│   ├── news.html
│   ├── people.html
│   ├── projects.html
│   ├── pubs.html
│   ├── pubs.html~
│   └── research.html
└── shortcodes
    # ... more on this later
</code></pre>

<h1 id="the-front-page">The Front Page.</h1>

<p>Here is what was in <code>config.toml</code> for the home page:</p>

<pre><code>
[[menu.main]]
    name = &quot;Home&quot;
    url = &quot;/&quot;
    weight = 1
</code></pre>

<p>Because the <code>url</code> field is empty, Hugo will search for the file to use
in a number of places, starting with my <code>/layouts</code> page, where there
is indeed an <code>index.html</code> file.  This file is a <em>template</em> that Hugo
will use to render the actual Home page.</p>

<pre><code class="language-html">
&lt;!-- /layouts/index.html --&gt;
{{ partial &quot;header.html&quot; . }}

&lt;div id=&quot;main-body&quot; class=&quot;page-content&quot;&gt;
  &lt;div id=&quot;about-blurb&quot; class=&quot;blurb&quot;&gt;
    {{ range where .Pages &quot;Type&quot; &quot;about&quot; }}
    {{ .Content }}
    {{ end }}
  &lt;/div&gt;

  &lt;h1 class=&quot;post-title&quot;&gt; News &lt;/h1&gt;
  &lt;ol class=&quot;post-list&quot;&gt;
    {{ $pag := .Paginate (where .Data.Pages &quot;Type&quot; &quot;news&quot;) }}
    {{ range $pag.Pages }}
    {{ partial &quot;news-stub.html&quot; . }}
    {{ end }}
  &lt;/ol&gt;

  &lt;div class=&quot;post-navigation&quot;&gt;
    {{ partial &quot;pagination.html&quot; . }}
  &lt;/div&gt;
&lt;/div&gt;

{{ partial &quot;footer.html&quot; . }}
</code></pre>

<p>Here is a screen capture of the front page.</p>


<figure >
    
        <img src="/img/front-page.jpg" />
    
    
</figure>


<h2 id="hugo-templates">Hugo Templates</h2>

<p>The simplest is the yellow block, which was generated by</p>

<pre><code>
  &lt;div id=&quot;about-blurb&quot; class=&quot;blurb&quot;&gt;
    {{ range where .Pages &quot;Type&quot; &quot;about&quot; }}
      {{ .Content }}
    {{ end }}
  &lt;/div&gt;
</code></pre>

<p>Within a <code>div</code> block, there is a Hugo function <code>range</code> ... <code>end</code>.</p>

<p><code>range</code> is a <code>for</code> loop that finds all the pages whose <code>Type</code> is <code>about</code>.
Those pages that are found are processed by the command inside which is
simply <code>{{ .Content }}</code>, which emits the contents of those pages.</p>

<h3 id="which-pages-have-type-of-about-metadata">Which pages have <code>Type</code> of <code>about</code>? Metadata!</h3>

<p>Every file that is processed by Hugo has <em>front-matter</em> that contains
meta-data about the file. At a minimum, it must include a <code>title</code> and a <code>date</code>. 
It can also include other things.  Here is the start of <code>about.org</code>, which includes
a metadata entry <code>#+TYPE: about</code> which Hugo uses.  The <code>{{ .Content }}</code> of
this file is the remainder of the file, which is rendered to HTML for
display.</p>

<pre><code class="language-org">
#+DATE: 2017-01-25T00:25:59-05:00
#+TITLE: About PSICE
#+TAGS: 
#+AUTHOR: 
#+DESCRIPTION: Who we are and what we do
#+TYPE: about

Penn State Ice and Climate is an interdisciplinary group of
researchers from across the university dedicated to a better
</code></pre>

<h2 id="partials">Partials</h2>

<p>The material outlined
in red was generated by</p>

<pre><code>
{{ partial &quot;header.html&quot; . }}
</code></pre>

<p>which uses the file <code>/layouts/partials/header.html</code> as a template.   This
file has all the required HTML header stuff, as well as lots of Hugo-specific
functions that generate the navigation bar, the social-media icons and links,
etc.</p>

<h2 id="news">News</h2>

<p>And the orange section is generated by</p>

<pre><code>
  &lt;h1 class=&quot;post-title&quot;&gt; News &lt;/h1&gt;
  &lt;ol class=&quot;post-list&quot;&gt;
    {{ $pag := .Paginate (where .Data.Pages &quot;Type&quot; &quot;news&quot;) }}
    {{ range $pag.Pages }}
    {{ partial &quot;news-stub.html&quot; . }}
    {{ end }}
  &lt;/ol&gt;
</code></pre>

<p>Here are the files in <code>/content/news</code>.  The <code>{{ .Paginate ... }}</code> command
will group the pages of <code>Type</code> equal to <code>news</code> in sets of 10 (by default - this can be changed in config).
The <code>range</code> ... <code>end</code> loop will run the partial function <code>news-stub.html</code> on 
each file.  <code>news-stub</code> will print the title and date.</p>

<pre><code>
│   ├── news
│   │   ├── GMT.org
│   │   └── migrating-to-hugo.org

</code></pre>

<blockquote>
<p>
Types part 2: each file in the directory <code>content/news/</code> has <code>Type</code> of <code>news</code> even if there is no metadata tag...
</p>
</blockquote>

<p>And here is <code>news-stub.html</code> template with a lot of extraneous stuff
stripped out.  It generates an html <code>&lt;li&gt;</code> tag (unordered list) for each file.
It makes an <code>&lt;a&gt;</code> link.  The contents of the link are the title (<code>{{ .Title }}</code>)
and a time.  The time is formatted twice: once for the <code>&lt;time&gt;</code> tag (with a <code>datetime</code> property in the expected format) and 
once to be displayed (<code>Published {{ .Date.Format &quot;Mon, Jan 2, 2006&quot; }}</code>).</p>

<p>The  <code>Date.Format</code> function is given a format that it can cleverly
figure out ("2006-01-02" and "Mon, Jan 2, 2006" are both just <em>hints</em> to Hugo
on how you want the actual date formatted).</p>

<pre><code class="language-html">
&lt;li ...&gt;
    &lt;a href=&quot;{{ .Permalink }}&quot; ...&gt;
        &lt;h4 &gt;{{ .Title }}&lt;/h4&gt;
        &lt;time datetime=&quot;{{ .Date.Format &quot;2006-01-02&quot; }}&quot;&gt;Published {{ .Date.Format &quot;Mon, Jan 2, 2006&quot; }}&lt;/time&gt;
    &lt;/a&gt;
&lt;/li&gt;
</code></pre>

<p>And here is the HTML that was generated (with all the extra cruft):</p>

<pre><code class="language-html">
&lt;li class=&quot;nomove blurb-container&quot; itemprop=&quot;blogPost&quot; itemscope=&quot;&quot; itemtype=&quot;https://schema.org/BlogPosting&quot;&gt;
    &lt;a href=&quot;http://localhost:1313/lab-site/news/gmt/&quot; class=&quot;news-post&quot; itemprop=&quot;url&quot; title=&quot;Go to post detail&quot;&gt;
        &lt;h4 class=&quot;post-stub-title&quot; itemprop=&quot;name&quot;&gt;GMT&lt;/h4&gt;
        &lt;time class=&quot;post-stub-date&quot; datetime=&quot;2017-07-16&quot;&gt;Published Sun, Jul 16, 2017&lt;/time&gt;

    &lt;/a&gt;
&lt;/li&gt;
</code></pre>

<h1 id="more">More</h1>

<p><a href="http://www.psice.psu.edu/news/hugo-pages/" title="Part Two, on how to customize pages">Part Two, on how to customize pages</a>, or click on the <code>Tagged: hugo</code> link below.</p>


    
</div>



        <footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
            
                <a href="/tags/hugo/">hugo</a>
            
        </p>
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?text=Migrating%20To%20Hugo%20%28Part%201%29&url=http%3a%2f%2fwww.psice.psu.edu%2fnews%2fmigrating-to-hugo%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fwww.psice.psu.edu%2fnews%2fmigrating-to-hugo%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        

        
            <a class="icon-google-plus" href="https://plus.google.com/share?url=http%3a%2f%2fwww.psice.psu.edu%2fnews%2fmigrating-to-hugo%2f"
              onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
              <i class="fa fa-google-plus"></i>
                <span class="hidden">Google+</span>
            </a>
        
    </div>
</footer>
    </article>
</div>

</div>
</div>
</div>

<footer class="footer">
  <div class="container">
    <div class="site-title-wrapper">
      <h1 class="site-title">
        <a title="PSICE" href="http://www.psice.psu.edu">PSICE</a>
      </h1>
      <a class="button-square" href="" rel="feed" type="application/rss+xml"><i class="fa fa-rss"></i></a>
    </div>

    <p class="footer-copyright">
    <span>&copy; 2017 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
    </p>
    <p class="footer-copyright">
    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
    <span>/ Tweaked by <a href="https://github.com/wbthomason">wbthomason</a></span>
    </p>
  </div>
</footer>

<script src="http://www.psice.psu.edujs/jquery-1.11.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
<script src="http://www.psice.psu.edujs/jquery.fitvids.js"></script>
<script src="http://www.psice.psu.edujs/scripts.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>

